{% block content %}
    <div class="post">
        {% if post.pub_date %}
            <div class="date">
                {{ post.pub_date }}
            </div>
		{% endif %}
		<p>{{ post.content|urlize|linebreaks }}</p>
		<p>{{ post.get_privacy_display }}</p>
    </div>

	<div class="comments">
		{% for comment in comments %}
			<p>{{ comment.comment_text|urlize|linebreaks }}</p>
		{% endfor %}
	</div>

	<button type=button id = "check_edit" name = {{post.author}} value = {{user.username}} onclick="check_edit();">Edit</button>

	<button type=button id = f2 onclick="nextC();">Comment</button>

	<br><br>

	<button type=button id = "check_delete" name = {{post.author}} value = {{user.username}} onclick="check_delete();">Delete</button>

	<script>
	function check_edit() {
		var author_name = document.getElementById("check_edit").name;
		var poster_name = document.getElementById("check_edit").value;
		if (author_name === poster_name) {
			nextE();
		} else {
			alert("This is nor our post. You are not allowed to modify this post!")
		}
	}

	function check_delete() {
		var author_name = document.getElementById("check_delete").name;
		var poster_name = document.getElementById("check_delete").value;
		if (author_name === poster_name) {
			nextD();
		} else {
			alert("you are not allowed to modify this post!")
		}
	}

	function edit(){
		var n = 0;
		var flip = function(){
			if(n % 2){
				document.getElementById('edit').style.display="none";	
			}
			else{
				document.getElementById('edit').style.display="block";	
			}
			++n;
		}
		return flip;
	}

	function comment(){
		var n = 0;
		var flip = function(){
			if(n % 2){
				document.getElementById('comment').style.display="none";	
			}
			else{
				document.getElementById('comment').style.display="block";	
			}
			++n;
		}
		return flip;
	}

	function delete_post() {
		var n = 0;
		var flip = function(){
			if(n % 2){
				document.getElementById('delete').style.display="none";	
			}
			else{
				document.getElementById('delete').style.display="block";	
			}
			++n;
		}
		return flip;
	}

	function delete_posts() {
		alert("call this");
	}

	var nextC = comment();
	var nextD = delete_post();
	var nextE = edit();
	</script>


	<div id="edit" style="display: none;">
		<h1>New Content</h1>
		<form method="POST" class="post-form">{% csrf_token %}
			{{ form.as_p }}
			{{ form.get_privacy_display}}
			<input type="hidden" name="formType" value="post"></input>
			<button type="submit" value="save">Save</button>
		</form>
	</div>

	<div id="comment" style="display: none;">
		<h1>New Comment</h1>
		<form method="POST" class="comment-form">{% csrf_token %}
			{{ cform.as_p }}
			<input type="hidden" name="formType" value="comment"></input>
			<button type="submit" value="save">Save</button>
		</form>
	</div>

	<div id="delete" style="display: none;">
		<h3>Are you sure that you want to delete this post?</h3>
		
		
		<!-- I need to edit this to delete the current post -->
		<form action={% url 'posts:index' %}>
			<button type="submit" value="delete_yes" onclick="delete_posts();">Yes</button>
		</form>
		

		<button type="submit" value="delete_no" onclick="nextD();"> No</button>
	</div>
	
{% endblock %}

	