{% extends 'posts/base.html' %}
{% block content %}

{% load markdown_deux_tags %}

<style>

table.post {
    border: "1";
    width:80%;
    border:1px solid #d4d4d4;
}

td.post_title { 
    width: 20%;
}

td.post_content { 
    width: 60%;
}

table.post th {
    padding:10px;
    width: 10%;
}

</style>

<script>
 function makePost(){
     var n = 0;
     var flip = function(){
	 if(n % 2){
	     document.getElementById('makePost').style.display="none";
	     document.getElementById('showContent').style.display="block";
	 }
	 else{
	     document.getElementById('makePost').style.display="block";
	     document.getElementById('showContent').style.display="none";
	 }
	++n;
     }
     return flip;
 }
 var next = makePost();
</script>


<center>
<div id="makePost" style="display: none">
    <h1>New Content</h1>
    <form method="POST" class="post-form">{% csrf_token %}
        {{ form.as_p }}
	    {{ form.get_privacy_display}}
        <button type="submit" value="save">Save</button>
    </form>
    <button type=button id = f2 onclick="next();">Back</button>
</div>
</center>




<center>

<div id="showContent container">
    <!-- POST LIST -->
    {% if latest_post_list %}
        {% for post in latest_post_list %}
        <table class = "post">
        {% if post.contentType == 'text/plain' %}
        <tr>
            <th>
            <img src="https://itxdesign-itxdesign.netdna-ssl.com/wp-content/uploads/2014/01/wordpress-post.jpg" 
            alt="Note" style="height:32px;width:32px">
            {{ post.author.user }}
            </th>

            <td class = "post_title">     
            <a href="{% url 'posts:detail' post.id %}" class="title">{{post.title}}</a>
            </td>
            <tr>
            <th></th>
            <td class = "post_content">
            <p>{{ post.content|linebreaks }}</p>
            </td>
            </tr>
            <br>
        </tr>
        </table>

        {% else %}
        <table class = "post">
        <tr>
            <th>
            <img src="https://itxdesign-itxdesign.netdna-ssl.com/wp-content/uploads/2014/01/wordpress-post.jpg" 
            alt="Note" style="height:32px;width:32px">
            {{ post.author.user }}
            </th>
            <td class = "post_title">
            <a href="{% url 'posts:detail' post.id %}" class="title">{{post.title}}</a>
            </td>
            <td class = "post_content">
            <p>{{ post.content|markdown }}</p>
            </td>
            <br>
        </tr>
        </table>
        {% endif %}
        {% endfor %}
    </table>

    {% else %}
        <h2>No posts are available!</h2>
    {% endif %}

    <!-- IMAGE LIST -->
    {% if latest_image_list %}
    <dl>
        {% for image in latest_image_list %}
	    <dt><img src={{ image.img.url }} alt="My_image"/></dt>
        {% endfor %}
    </dl>
    {% else %}
        <h2>No images are available!</h2>
    {% endif %}
</div>

<center>


    {% if user.is_authenticated and False %}<!-- QUICK DIRTY TEST HACK PLS RM-->
<div class="nav-bar">
    <table><tr>
    <td>
        <button type=button id = f1 onclick="next();">Create New Post</button>
    </td>
    <td style="float: right;">
        <form action={% url 'posts:create_img' %} method="get">
            <button type="submit" value="create_img" >Upload Image</button>
        </form>
    </td>
    </table>
</div>
    {% endif %}

{% endblock %}
