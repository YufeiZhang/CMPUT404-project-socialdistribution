{% extends 'posts/base.html' %}
{% block content %}

{% load markdown_deux_tags %}

<style>

table.post {
    border: "1";
    width:80%;
    border:1px solid #d4d4d4;
}

td.post_title { 
    width: 20%;
}

td.post_content { 
    width: 60%;
}

td.post_comment { 
    background-color: lightgrey;
    width: 60%;
}

table.post th {
    padding:10px;
    width: 10%;
}

</style>

<script>
 function makePost() {
     var n = 0;
     var flip = function() {
	 if(n % 2){
        document.getElementById('makePost').style.display="none";
        document.getElementById('showContent').style.display="block";
	 }
	 else{
        document.getElementById('makePost').style.display="block";
        document.getElementById('showContent').style.display="none";
	 }
	++n;
     }
     return flip;
 }
 var next = makePost();
</script>


<center>
<div id="makePost" style="display: none">
    <h1>New Content Here</h1>

    <form method="POST" class="post-form">{% csrf_token %}
        {{ form.as_p }}
	    {{ form.get_privacy_display}}
        <p>What is it</p>
        <button type="submit" value="save">Save</button>
    </form>

    <button onclick="next();">Back</button>
</div>
</center>




<center>

<div id="showContent container">
    <!-- POST LIST -->
    {% if latest_post_list %}
        {% for post in latest_post_list %}
        <table class = "post">
        {% if post.contentType == 'text/plain' %}
        <tr>
            <th>
            <p><img src="https://itxdesign-itxdesign.netdna-ssl.com/wp-content/uploads/2014/01/wordpress-post.jpg" 
            alt="Note" style="height:32px;width:32px">
            {{ post.author.user }}</p>
            </th>

            <td class = "post_title">  
            <h3>   
            <a href="{% url 'posts:detail' post.id %}" class="title">{{post.title}}</a>
            </h3>
            </td>

            <tr>
                <th></th>
                <td class = "post_content">
                <h4>{{ post.content|linebreaks }}</h4>
                </td>
            </tr>

            {% for comment in comments_dict|get_item:post.id %}
                <tr>
                <th></th>
                <td class = "post_comment">
                <p>{{comment.comment}}</p>
                </td>
            </tr>
            {% endfor%}
            <br>
        </tr>
        </table>

        {% else %}
        <table class = "post">
        <tr>
            <th>
            <img src="https://itxdesign-itxdesign.netdna-ssl.com/wp-content/uploads/2014/01/wordpress-post.jpg" 
            alt="Note" style="height:32px;width:32px">
            <p>{{ post.author.user }}</p>
            </th>
            <td class = "post_title">
            <h3>
            <a href="{% url 'posts:detail' post.id %}" class="title">{{post.title}}</a>
            </h3>
            </td>

            <tr>
                <th></th>
                <td class = "post_content">
                <h4>{{ post.content|linebreaks }}</h4>
                </td>
            </tr>

            {% for comment in comments_dict|get_item:post.id %}
                <tr>
                <th></th>
                <td class = "post_comment">
                <p>{{comment.comment}}</p>
                </td>
            </tr>
            {% endfor%}

            <br>
        </tr>
        </table>
        {% endif %}
        {% endfor %}
    </table>

    {% else %}
        <h2>No posts are available!</h2>
    {% endif %}

    <!-- IMAGE LIST -->
    {% if latest_image_list %}
    <dl>
        {% for image in latest_image_list %}
	    <dt><img src={{ image.img.url }} alt="My_image"/></dt>
        {% endfor %}
    </dl>
    {% else %}
        <h2>No images are available!</h2>
    {% endif %}
</div>


<center>
{% if user.is_authenticated and False %}<!-- QUICK DIRTY TEST HACK PLS RM-->
<div class="nav-bar">
    <table><tr>
    <td>
        <button type=button id = f1 onclick="next();">Create New Post</button>
    </td>
    <td style="float: right;">
        <form action={% url 'posts:create_img' %} method="get">
            <button type="submit" value="create_img" >Upload Image</button>
        </form>
    </td>
    </tr>
    </table>
</div>
    {% endif %}

{% endblock %}
